@{
    Layout = "~/Views/Shared/_LayoutCustom.cshtml";
    ViewData["Title"] = " Menu Page";
    ViewBag.Active = "Menu";
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <!-- Bootstrap Font Icon CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="~/css/menu.css">
    <title>Menu Page</title>
</head>

<body>
    <div class="container-fluid p-4">
        <div class="row ">
            <div class="col-4 h2  fw-bold" style="color: #0066A7;">
                Menu
            </div>
        </div>

        <div class="row bg-white p-2 ">
            <nav>
                <div class="nav nav-underline" id="nav-tab" role="tablist">
                    <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home"
                        type="button" role="tab" aria-controls="nav-home" aria-selected="true"><i
                            class="bi bi-list-check p-1"></i>Items</button>
                    <button class="nav-link " id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile"
                        type="button" role="tab" aria-controls="nav-profile" aria-selected="false"><i
                            class="bi bi-ui-checks-grid p-1"></i>Modifiers</button>
                </div>
            </nav>
        </div>
        <div class="row bg-white mt-2">
            <div class="col">
                <div class="tab-content " id="nav-tabContent">
                    @* <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab"
                        tabindex="0">
                        <div class="container-fluid p-3 " style="height: 700px;">
                            <div class="row">
                                <div class="col-2 ">
                                    <div class="row d-none d-xl-flex flex-column">
                                        <div class="">
                                            <span class="h4 fw-bold " style="color: #0066A7;">Category
                                                <button type="button" data-bs-toggle="modal"
                                                    data-bs-target="#staticBackdrop1"
                                                    style="text-decoration: none; border: none; background-color: white; position: absolute;"><i
                                                        class="bi bi-plus-square ms-2 h5"></i>
                                                </button>

                                            </span>
                                        </div>
                                        <div class="category overflow-auto mt-3">
                                            @foreach (var category in Model.Categories)
                                            {
                                                <a class="justify-content-start align-items-center category-inner-box mt-2 text-reset"
                                                    style="text-decoration: none; !important ">
                                                    <div class="mb-3 name-sidebar ms-1 active-name">
                                                        <img src="~/images/logos/sixdot.png" alt=""
                                                            style="width:20px; height: 15px;" class="active-icon">
                                                        @category.Categoryname
                                                        <a href="#" style="text-decoration: none; color: grey;">
                                                            <i class="bi bi-pen float-end"></i>
                                                        </a>
                                                        <a href="#" style="text-decoration: none; color: grey;"
                                                            data-bs-toggle="modal" data-bs-target="#deleteModal">
                                                            <i class="bi bi-trash float-end"></i>
                                                        </a>
                                                    </div>
                                                </a>
                                            }
                                        </div>
                                    </div>
                                    <!-- Model Add Category -->
                                  
                                    <form method="post" asp-action="AddCategory" asp-controller="Menu">
                                        <div class="modal fade" id="staticBackdrop1" data-bs-backdrop="static"
                                            data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
                                            aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h1 class="modal-title fs-5" id="staticBackdropLabel">Add
                                                            Category</h1>
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                            aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="form-floating mb-3">
                                                            <input type="text" class="form-control" id="Categoryname"
                                                                name="Categoryname" placeholder="Category Name"
                                                                required>
                                                            <label for="Categoryname">Name</label>
                                                        </div>
                                                        <div class="form-floating">
                                                            <textarea class="form-control" name="Categorydescription"
                                                                placeholder="Enter Description"
                                                                id="Categorydescription"></textarea>
                                                            <label for="Categorydescription">Description</label>
                                                        </div>
                                                        <div class="col mt-3 mb-3 d-flex justify-content-end">
                                                            <button class="btn text-white me-2"
                                                                style="background-color: #0066A7;"
                                                                type="submit">Save</button>
                                                            <button class="btn"
                                                                style="border-color: #0066A7; color: #0066A7;"
                                                                type="button" data-bs-dismiss="modal">Cancel</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>

                                    <!-- Model Delete -->
                                    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static"
                                        data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
                                        aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                            <div class="modal-content">

                                                <div class="modal-body ">
                                                    <div class="d-flex justify-content-center ">
                                                        <img src="pizzashop_images\images\toppng.com-warning-icon-2400x2400.png"
                                                            alt="" style="width: 10%; height: 10%;">
                                                    </div>
                                                    <div class="d-flex justify-content-center mt-3">
                                                        <span class="text-muted">Are you sure you want to delete
                                                            this Item ?</span>
                                                    </div>
                                                    <div class="d-flex justify-content-center mt-3">
                                                        <button class="btn text-white "
                                                            style="background-color: #0066A7;"
                                                            type="submit">Yes</button>
                                                        <button class="btn ms-2"
                                                            style="border-color: #0066A7; color: #0066A7;" type="submit"
                                                            data-bs-dismiss="modal">No</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xl-10 ">
                                    <div class="row">
                                        <div class="col">
                                            <span class="h4 fw-bold " style="color: #0066A7;" data-bs-toggle="offcanvas"
                                                href="#offcanvasExample1" role="button1"
                                                aria-controls="offcanvasExample1">Items</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 d-flex justify-content-end">
                                            <form class="d-flex " role="search">
                                                <div class="d-flex  me-2 p-1 position-relative">
                                                    <input class="search_input form-control me-2 border-0" type="text"
                                                        placeholder="Search" aria-label="Search">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23"
                                                        fill="currentColor"
                                                        class="bi bi-search position-absolute search-icon-main"
                                                        viewBox="0 0 16 16">
                                                        <path
                                                            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
                                                    </svg>
                                                </div>
                                                <button class="btn border " type="submit"><i
                                                        class="bi bi-trash h4 text-muted"></i></button>
                                                <button class="btn text-white d-none d-md-block ms-2" type="submit"
                                                    style=" background-color: #0066A7;">+New
                                                    Item</button>
                                                <button class="btn text-white d-md-none ms-2" type="submit"
                                                    style=" background-color: #0066A7;">+</button>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col">
                                            <div class="table-responsive">
                                                <table class="table">
                                                    <thead>
                                                        <tr>
                                                            <th scope="col"><input class="form-check-input main-check"
                                                                    type="checkbox" value="" id="flexCheckDefault"></th>
                                                            <th scope="col">Name</th>
                                                            <th scope="col">Item Type</th>
                                                            <th scope="col">Rate </th>
                                                            <th scope="col">Quantity</th>
                                                            <th scope="col">Available</th>
                                                            <th scope="col">Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                <input class="form-check-input inner-check"
                                                                    type="checkbox" value="" id="flexCheckDefault">
                                                            </td>
                                                            <td>
                                                                <img src="pizzashop_images/images/dining-menu.png"
                                                                    alt="" width="30px">
                                                                Punjabi Tadka Sandwich
                                                            </td>
                                                            <td><img src="pizzashop_images\images\icons\non-veg-icon.svg"
                                                                    width="20px" alt=""></td>
                                                            <td>200</td>
                                                            <td>1</td>
                                                            <td>
                                                                <div class="form-check form-switch">
                                                                    <input class="form-check-input"
                                                                        style="width: 2.5rem; height: 25px;"
                                                                        type="checkbox" role="switch"
                                                                        id="flexSwitchCheckChecked" checked>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div class="d-flex">
                                                                    <a href=""
                                                                        style="text-decoration: none; color: grey;"><i
                                                                            class="bi bi-pen"></i></a>
                                                                    <a href="" class="ms-4"
                                                                        style="text-decoration: none; color: grey;"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#staticBackdrop"><i
                                                                            class="bi bi-trash"></i></a>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <input class="form-check-input inner-check"
                                                                    type="checkbox" value="" id="flexCheckDefault">
                                                            </td>
                                                            <td>
                                                                <img src="pizzashop_images/images/dining-menu.png"
                                                                    alt="" width="30px">
                                                                Chicken Sandwich
                                                            </td>
                                                            <td><img src="pizzashop_images\images\icons\non-veg-icon.svg"
                                                                    width="20px" alt=""></td>
                                                            <td>200</td>
                                                            <td>1</td>
                                                            <td>
                                                                <div class="form-check form-switch">
                                                                    <input class="form-check-input"
                                                                        style="width: 2.5rem; height: 25px;"
                                                                        type="checkbox" role="switch"
                                                                        id="flexSwitchCheckChecked" checked>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div class="d-flex">
                                                                    <a href=""
                                                                        style="text-decoration: none; color: grey;"><i
                                                                            class="bi bi-pen"></i></a>
                                                                    <a href="" class="ms-4"
                                                                        style="text-decoration: none; color: grey;"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#staticBackdrop"><i
                                                                            class="bi bi-trash"></i></a>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <input class="form-check-input inner-check"
                                                                    type="checkbox" value="" id="flexCheckDefault">
                                                            </td>
                                                            <td>
                                                                <img src="pizzashop_images/images/dining-menu.png"
                                                                    alt="" width="30px">
                                                                Cheese Sandwich
                                                            </td>
                                                            <td><img src="pizzashop_images\images\icons\veg-icon.svg"
                                                                    width="20px" alt=""></td>
                                                            <td>200</td>
                                                            <td>1</td>
                                                            <td>
                                                                <div class="form-check form-switch">
                                                                    <input class="form-check-input"
                                                                        style="width: 2.5rem; height: 25px;"
                                                                        type="checkbox" role="switch"
                                                                        id="flexSwitchCheckChecked" checked>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div class="d-flex">
                                                                    <a href=""
                                                                        style="text-decoration: none; color: grey;"><i
                                                                            class="bi bi-pen"></i></a>
                                                                    <a href="" class="ms-4"
                                                                        style="text-decoration: none; color: grey;"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#staticBackdrop"><i
                                                                            class="bi bi-trash"></i></a>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <input class="form-check-input inner-check"
                                                                    type="checkbox" value="" id="flexCheckDefault">
                                                            </td>
                                                            <td>
                                                                <img src="pizzashop_images/images/dining-menu.png"
                                                                    alt="" width="30px">
                                                                Aaloo Sandwich
                                                            </td>
                                                            <td><img src="pizzashop_images\images\icons\veg-icon.svg"
                                                                    width="20px" alt=""></td>
                                                            <td>200</td>
                                                            <td>1</td>
                                                            <td>
                                                                <div class="form-check form-switch">
                                                                    <input class="form-check-input"
                                                                        style="width: 2.5rem; height: 25px;"
                                                                        type="checkbox" role="switch"
                                                                        id="flexSwitchCheckChecked" checked>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div class="d-flex">
                                                                    <a href=""
                                                                        style="text-decoration: none; color: grey;"><i
                                                                            class="bi bi-pen"></i>
                                                                    </a>
                                                                    <a href="" class="ms-4"
                                                                        style="text-decoration: none; color: grey;"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#staticBackdrop"><i
                                                                            class="bi bi-trash"></i>
                                                                    </a>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <input class="form-check-input inner-check"
                                                                    type="checkbox" value="" id="flexCheckDefault">
                                                            </td>
                                                            <td>
                                                                <img src="pizzashop_images/images/dining-menu.png"
                                                                    alt="" width="30px">
                                                                Black Bean Sandwich
                                                            </td>
                                                            <td><img src="pizzashop_images\images\icons\veg-icon.svg"
                                                                    width="20px" alt=""></td>
                                                            <td>200</td>
                                                            <td>1</td>
                                                            <td>
                                                                <div class="form-check form-switch">
                                                                    <input class="form-check-input"
                                                                        style="width: 2.5rem; height: 25px;"
                                                                        type="checkbox" role="switch"
                                                                        id="flexSwitchCheckChecked" checked>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div class="d-flex">
                                                                    <a href=""
                                                                        style="text-decoration: none; color: grey;"><i
                                                                            class="bi bi-pen"></i>
                                                                    </a>
                                                                    <a href="" class="ms-4"
                                                                        style="text-decoration: none; color: grey;"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#staticBackdrop"><i
                                                                            class="bi bi-trash"></i>
                                                                    </a>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="main-pagination  ">
                                                <div class="item-show ">
                                                    <nav aria-label="Page navigation example">
                                                        <div class="pagination ">
                                                            <span class="align-self-center">Items Per Page
                                                                :</span>
                                                            <select
                                                                class="form-select form-select-sm ms-2 align-self-center"
                                                                aria-label="Small select example"
                                                                style=" width: unset; ">
                                                                <option value="1">1</option>
                                                                <option value="2">2</option>
                                                                <option value="3">3</option>
                                                            </select>
                                                        </div>
                                                    </nav>
                                                </div>
                                                <div class="showing-page">
                                                    <nav aria-label="Page navigation example">
                                                        <div class="pagination ">
                                                            <span class=" ms-2  align-self-center">Showing 1-5
                                                                of 13</span>
                                                            <button class="btn border ms-2  align-self-center"
                                                                type="submit"><i class="bi bi-chevron-left "></i>
                                                            </button>
                                                            <button class="btn border ms-2  align-self-center"
                                                                type="submit"><i class="bi bi-chevron-right"></i>
                                                            </button>
                                                        </div>
                                                    </nav>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> *@
                    <partial name="~/Views/Menu/_PartialViewTab.cshtml" />
                    <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab"
                        tabindex="0">Tab2</div>
                </div>
            </div>
        </div>
    </div>
</body>


</html>

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script>
    function openEditModal(categoryId) {
    $.ajax({
        url: '/Menu/EditCategory/' + categoryId,
        type: 'GET',
        success: function (data) {
            if (data) {
                console.log("Fetched Data:", data); // Debugging

                // Populate the correct fields in the modal
                $('#editCategoryId').val(data.categoryid);
                $('#editCategoryName').val(data.categoryname);
                $('#editCategoryDescription').val(data.categorydescription);
                
                // Show the modal
                $('#staticBackdrop2').modal('show');
            } else {
                alert("No category data found.");
            }
        },
        error: function () {
            alert("Failed to load category details.");
        }
    });
}

    let categoryIdToDelete = null;

     var deleteCategoryId = 0;

    function openDeleteModal(categoryId) {
        console.log("Delete Category ID:", categoryId);
        deleteCategoryId = categoryId;
        $('#deleteModal').modal('show');
    }

    $('#confirmDeleteBtn').click(function () {
        console.log("Deleting Category ID:", deleteCategoryId);
        $.ajax({
            url: '@Url.Action("DeleteCategory", "Menu")',
            type: 'POST',
            data: { categoryId: deleteCategoryId },
            success: function (response) {
                location.reload();
            },
            error: function () {
                toastr.error('An error occurred while deleting the category.');
            }
        });
    });

</script>